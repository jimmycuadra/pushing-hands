(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};ph.MusicPlayer=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={currentIndex:0,state:"paused"},n.prototype.initialize=function(){return this.collection.on("change:state",this.stateChanged,this),this.collection.on("ended",this.playNextTrack,this)},n.prototype.toJSON=function(){var e;return e=n.__super__.toJSON.apply(this,arguments),e.title=this.currentTrack().get("title"),e},n.prototype.stateChanged=function(e,t,n){return this.set({state:t})},n.prototype.playNextTrack=function(){return this.nextTrack(),this.play()},n.prototype.currentTrack=function(){return this.collection.at(this.get("currentIndex"))},n.prototype.isPlaying=function(){return!this.isPaused()},n.prototype.isPaused=function(){return this.get("state")==="paused"},n.prototype.play=function(){return this.currentTrack().play()},n.prototype.pause=function(){return this.currentTrack().pause()},n.prototype.togglePlayback=function(){return this.isPaused()?this.play():this.pause()},n.prototype.prevTrack=function(){var e,t;t=this.isPlaying(),this.currentTrack().reset(),e=this.get("currentIndex"),e-=1,e<0&&(e=this.collection.length-1),this.set({currentIndex:e});if(t)return this.play()},n.prototype.nextTrack=function(){var e,t;t=this.isPlaying(),this.currentTrack().reset(),e=this.get("currentIndex"),e+=1,e>=this.collection.length&&(e=0),this.set({currentIndex:e});if(t)return this.play()},n}(Backbone.Model)}).call(this);