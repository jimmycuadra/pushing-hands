(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};ph.Cell=function(t){function r(){return this.refill=e(this.refill,this),this.clear=e(this.clear,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.COLORS=["r","g","b","o"],r.randomColor=function(){return this.COLORS[_.random(0,this.COLORS.length-1)]},r.prototype.initialize=function(){var e,t,n;return e=this.constructor.COLORS.slice(),n=this.get("upperNeighbor"),n&&(e=_.difference(e,[n.get("color")])),t=Math.floor(Math.random()*e.length),this.set("color",e[t]),this.on("clear",this.clear)},r.prototype.clear=function(){return this.set("color",null)},r.prototype.isClear=function(){return!this.get("color")},r.prototype.refill=function(){var e,t;if(!this.isClear())return;return t=this.get("upperNeighbor"),e=t?t.fallingBlockColor():this.constructor.randomColor(),this.set("color",e)},r.prototype.fallingBlockColor=function(){var e,t;return e=this.get("color"),t=this.get("upperNeighbor"),e?(this.trigger("clear"),e):t?t.fallingBlockColor():this.constructor.randomColor()},r}(Backbone.Model)}).call(this);